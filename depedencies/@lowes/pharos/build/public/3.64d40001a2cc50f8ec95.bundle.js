(window.webpackJsonpPharos=window.webpackJsonpPharos||[]).push([[3],{15:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return c}));var s=r(0),a=r(6);const o=["[object String]","[object Number]"];function c(e,t={}){const r=Object.prototype.toString.call(e),{type:c,errorInitiator:n="pharos",url:i,errorListenerVariables:p,traceIdKey:l,userDefined:u=!1}=t,m={userDefined:!1,type:c||"error",code:0,message:"",mapKey:"",traceId:"",initiator:"",url:i,stackTrace:"",[a.errorInitiator]:n};if(o.includes(r))m.message=e.toString();else{const{constructor:{name:t,prototype:r}={},errorDetailsType:a}=e;let o=t;switch(r&&r instanceof Error&&(o="Error"),a||o){case"Event":((e,t)=>{const{target:r}=t,{src:a,nodeName:o,href:c,outerHTML:n,textContent:i,constructor:{name:p}={}}=r||{};e.message=o?"Failed to load "+p:"",e.url=Object(s.f)(e.url,a||c),e.type=Object(s.f)(e.type,o),e.initiator=Object(s.f)(e.initiator,n||i)})(m,e);break;case"Error":((e,t)=>{const{stack:r,message:a,name:o,fileName:c}=t;e.message=Object(s.f)(e.message,a),e.type=Object(s.f)(e.type,o),e.stackTrace=Object(s.f)(e.stackTrace,r),e.url=Object(s.f)(e.url,c)})(m,e);break;case"XMLHttpRequest":((e,t,r)=>{const{status:a,statusText:o,responseType:c,pharosUrl:n,responseURL:i}=t;e.url=i||n,e.message=o||Object(s.g)(a),e.type=c?"XMLHttpRequest-"+c:"XMLHttpRequest",e.code=a,e.traceId=r?Object(s.h)(t.getAllResponseHeaders().split("\r\n"),r):""})(m,e,l);break;case"ErrorEvent":((e,t)=>{const{message:r,type:s,filename:a,error:o,url:c}=t,{target:n}=t,{src:i,url:p}=n||{};e.url=i||a||p||c,e.message=r,e.type="error"===s?"script":s,o&&("[object Array]"===Object.prototype.toString.call(o)?e.stackTrace=JSON.stringify(o.map(e=>e.stack).filter(Boolean)):e.stackTrace=o.stack)})(m,e);break;case"PromiseRejectionEvent":((e,t,r)=>{const{reason:s,type:a,promise:o}=t;if("unhandledrejection"===a?(r.promiseMapCount+=1,e.mapKey=r.promiseMapCount,r.promiseMap.set(o,e.mapKey)):(e.mapKey=r.promiseMap.get(o),r.promiseMap.delete(o)),"object"==typeof s){const{message:t,stack:r,src:a,url:o,href:c,request:n}=s;if("string"==typeof n)e.url=n;else{const{responseUrl:t,url:r,status:s}=n||{};e.url=t||r||a||c||o,e.code=s}e.message=t||0!==Object.keys(s).length&&JSON.stringify(s)||"",e.stackTrace=r}else e.message=s;e.type=a})(m,e,p);break;case"gmap":(e=>{e.type="googlemapauth",e.message="Google Map Authentication Error",e.code=401})(m);break;case"consoleError":((e,t,r)=>{const{consoleArgs:s}=t;e.type=r,e.message="console Error",e.stackTrace=JSON.stringify([...s])})(m,e,a);break;default:((e,t,r,a)=>{const{url:o,status:c,statusText:n,message:i,stack:p,type:l,error:u,reason:m,headers:g}=t,{stack:f}=u||{},{stack:y}=m||{};e.userDefined=a,e.url=Object(s.f)(e.url,o),e.message=Object(s.f)(e.message,i||n),e.type=Object(s.f)(e.type,l),e.code=Object(s.f)(e.code,c),e.traceId=r?Object(s.h)(g,r):"",e.stackTrace=p||f||y})(m,e,l,u)}}if(m.url){const e=new URL(m.url,window.location.origin);m.url=e.href}else m.url=window.location.href;return m}}}]);