!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Pharos=t():e.Pharos=t()}(window,(function(){return function(e){function t(t){for(var n,o,a=t[0],s=t[1],i=0,l=[];i<a.length;i++)o=a[i],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&l.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(c&&c(t);l.length;)l.shift()()}var n={},r={0:0};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,o){n=r[e]=[t,o]}));t.push(n[2]=a);var s,i=document.createElement("script");i.charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.src=function(e){return o.p+""+({}[e]||e)+"."+{1:"74cf4bb3e6789fb01e78",2:"ccaaef19930f48a18cdc",3:"64d40001a2cc50f8ec95"}[e]+".bundle.js"}(e);var c=new Error;s=function(t){i.onerror=i.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",c.name="ChunkLoadError",c.type=o,c.request=a,n[1](c)}r[e]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:i})}),12e4);i.onerror=i.onload=s,document.head.appendChild(i)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="https://dev.lowescdn.com/dev0021/node/pharos/devlatest/",o.oe=function(e){throw console.error(e),e};var a=window.webpackJsonpPharos=window.webpackJsonpPharos||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var i=0;i<a.length;i++)t(a[i]);var c=s;return o(o.s=14)}([function(e,t,n){"use strict";n.d(t,"q",(function(){return i})),n.d(t,"m",(function(){return c})),n.d(t,"o",(function(){return l})),n.d(t,"a",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"h",(function(){return w})),n.d(t,"l",(function(){return m})),n.d(t,"j",(function(){return d})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return f})),n.d(t,"k",(function(){return g})),n.d(t,"n",(function(){return b})),n.d(t,"b",(function(){return y})),n.d(t,"e",(function(){return T})),n.d(t,"c",(function(){return v})),n.d(t,"p",(function(){return k})),n.d(t,"f",(function(){return S}));n(8);var r=n(10);n(3),n(2);const o=e=>e;let a={onBeforeSendAnalyticsData:(e,t)=>o(t)};var s=n(5);const i=(e,t)=>e&&e>0?{category:"page",persist:parseFloat(e.toFixed(3)),name:t}:{},c=e=>0===Object.keys(e).length&&e.constructor===Object,l=(e,t)=>(t&&!c(t)&&e.push(t),null),u=e=>{const t=".xhr statusCode "+e;let n="Unknown Error";return e>=s["cl-er"].start&&e<=s["cl-er"].end&&(n="client error"),e>=s["s-er"].start&&e<=s["s-er"].end&&(n="server error"),e===s["cr-org"].start&&(n="Illegal cross origin request"),n+t},d=e=>e?e+"/pharos":"https://dev0034.d.lowes.com/pharos",p=(e,t,n)=>{let r=e-t;for(let e=0;e<n.length&&("script"===n[e].initiatorType||"link"===n[e].initiatorType);e+=1){const t=n[e].responseEnd;(void 0===r||t>r)&&(r=t)}return Math.max(r,0)},f=e=>function(...t){return Object(r.a)()?e.apply(this,t):(console.log("Not configured"),null)},h=(e,t)=>{if("string"==typeof t)return t;if(t&&e&&"object"==typeof t){const{constructor:{name:n}={}}=t;if("RegExp"===n){const n=e.match(t);if(n&&n.length)return n[0]}return""}},m=(e,t)=>e?"string"==typeof e[0]?e[0]:((e,t)=>"Request"in t&&((e,t)=>{try{return e instanceof t}catch(e){return!1}})(e[0],t.Request)?e[0].url:String(e[0]))(e,t):e;const w=(e,t)=>{const n=Object.prototype.toString.call(e);let r={};if("[object Headers]"===n)r=e.has(t)?e.get(t):"";else if("[object Object]"===n)r=Object.prototype.hasOwnProperty.call(e,t)?e[t]:"";else if("[object Array]"===n){r=((e.find(e=>e.includes(t.toLowerCase()))||"").split(":")[1]||"").trim()}return r};function g(e){return e&&e.timeOrigin?e.timeOrigin+e.now():Date.now()}function b(e){return e&&(e.token||e.applicationName)}function y(e,t){return!!t.length&&t.some(t=>e.includes(t))}function T(){}function v(e,t,n,r,o){if(r-n<5e3)return null;const a=0===o.length?e:o[o.length-1].end;return r-a<5e3?null:Math.max(a,t)}function k(e,t,n){const r=a.onBeforeSendAnalyticsData(e,t),{token:o,...s}=r||{},i=o?`${e}?key=${o}`:e;n.navigator.sendBeacon(i,JSON.stringify(s))}function S(e,t){return t||e}},function(e,t,n){"use strict";var r=n(11),o=n.n(r),a=n(7),s=n(0),i=n(9),c=n(6),l=n(4);var u=e=>{let t;e.addEventListener("message",e=>{const{data:{dataType:n,payload:r}}=e;switch(n){case"validatePayload":0;break;case"setVisitorId":{const{extraData:e={},...t}=r,{exDate:n}=e;window.document.cookie=`${c.pharosAnonymousCookie}=${r[c.anonymousId]}; path=/; ${n}`,Object(i.b)(t);break}case"sendDataToBeacon":{const{url:e,data:t}=r;Object(s.p)(e,t,window);break}case"setBatchData":t=r}},!1),Object(a.a)().then(()=>{if(t){const{url:n,data:r}=t;Object(l.b)(r)&&Object(s.p)(n,r,window),t=null,e.postMessage({dataType:"clearBatchData"})}})};const d=(()=>{const e=new o.a;return u(e),e})();t.a=d},function(e){e.exports=JSON.parse('{"RS":"resource","LT":"longtask","EL":"element","PT":"paint"}')},function(e,t,n){"use strict";t.a=new class{constructor(){this.events={}}on(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}emit(e,t){this.events[e]&&this.events[e].forEach(e=>{e(t)})}}},function(e,t,n){"use strict";let r;n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return c}));const o=e=>{const{PerformanceObserver:t={}}=window,{supportedEntryTypes:n=[]}=t;return n&&n.includes(e)},a=e=>{r=e||window.location.pathname},s=(e={})=>{const{resources:t=[],consoles:n=[],errors:r=[],customEvents:o=[],metrics:a=[]}=e;return t.length||n.length||r.length||o.length||a.length},i=()=>{const e=r!==window.location.pathname;return e&&(r=window.location.pathname),e},c=()=>({width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight})},function(e){e.exports=JSON.parse('{"success":{"start":200,"end":300},"timeout":600000,"cl-er":{"start":400,"end":499},"s-er":{"start":500,"end":599},"cr-org":{"start":0},"NT":270,"CNV":1000}')},function(e){e.exports=JSON.parse('{"applicationUrl":"applicationUrl","URL":"url","releaseTag":"releaseTag","stackTrace":"stackTrace","traceId":"x-b3-traceid","errorInitiator":"err-init","anonymousId":"anonymousId","first-paint":"FirstPaint","first-contentful-paint":"FirstContentfulPaint","pharosAnonymousCookie":"ph_aid","visitorId":"visitorId","packageVersion":"ph-ver","buildDetails":"BUILD_DETAILS","_comment":{"applicationUrl":"url","URL":"apiUrl","releaseTag":"release-tag","stackTrace":"stacktrace"}}')},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n(5);const o=[];let a=[];const s=()=>{o.forEach(e=>{e()}),a.forEach(e=>{e()})},i=setTimeout(()=>{s()},r.timeout);window.addEventListener("pagehide",e=>{e.persisted||(clearTimeout(i),s())});const c=()=>new Promise(e=>{o.push(e)}),l=()=>new Promise(e=>{a.push(e)})},function(e,t,n){"use strict";t.a="/api/webTelemetry"},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&!Array.isArray(e)}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));var o=function e(t,n,o=!0){let a=t,s=n;return o&&(a={...t},s={...n}),r(a)&&r(s)?(Object.keys(s).forEach(t=>{const n=a[t],o=s[t];Array.isArray(n)&&Array.isArray(o)?a[t]=n.concat(o):r(n)&&r(o)?a[t]=e({...n},o):a[t]=o}),a):s};let a={};const s=()=>({...a}),i=e=>{a=o(a,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));let r=!1;const o=()=>r,a=()=>{r=!0}},function(e,t,n){e.exports=function(){return n(13)('!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="https://dev.lowescdn.com/dev0021/node/pharos/devlatest/",r(r.s=3)}([function(e){e.exports=JSON.parse(\'{"RS":"resource","LT":"longtask","EL":"element","PT":"paint"}\')},function(e){e.exports=JSON.parse(\'{"success":{"start":200,"end":300},"timeout":600000,"cl-er":{"start":400,"end":499},"s-er":{"start":500,"end":599},"cr-org":{"start":0},"NT":270,"CNV":1000}\')},function(e){e.exports=JSON.parse(\'{"applicationUrl":"applicationUrl","URL":"url","releaseTag":"releaseTag","stackTrace":"stackTrace","traceId":"x-b3-traceid","errorInitiator":"err-init","anonymousId":"anonymousId","first-paint":"FirstPaint","first-contentful-paint":"FirstContentfulPaint","pharosAnonymousCookie":"ph_aid","visitorId":"visitorId","packageVersion":"ph-ver","buildDetails":"BUILD_DETAILS","_comment":{"applicationUrl":"url","URL":"apiUrl","releaseTag":"release-tag","stackTrace":"stacktrace"}}\')},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&!Array.isArray(e)}r.r(t),r.d(t,"messageHandler",(function(){return g}));var a=function e(t,r,a=!0){let o=t,s=r;return a&&(o={...t},s={...r}),n(o)&&n(s)?(Object.keys(s).forEach(t=>{const r=o[t],a=s[t];Array.isArray(r)&&Array.isArray(a)?o[t]=r.concat(a):n(r)&&n(a)?o[t]=e({...r},a):o[t]=a}),o):s};new class{constructor(){this.events={}}on(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}emit(e,t){this.events[e]&&this.events[e].forEach(e=>{e(t)})}};var o=r(0);var s=r(1);const i=(e,t)=>e&&e>0?{category:"page",persist:parseFloat(e.toFixed(3)),name:t}:{},c=(e,t)=>{var r;return t&&(r=t,0!==Object.keys(r).length||r.constructor!==Object)&&e.push(t),null};function l(e,t){const r=new Date;r.setTime(r.getTime()+24*t*60*60*1e3);const n="expires="+r.toUTCString();if(e)return{uid:""+e,exDate:n};return{uid:"undefined"!=typeof crypto&&crypto.getRandomValues?([1e7]+-1e3+-4e3+-8e3+-1e11+-8e12+-4e12+-1e12).replace(/[018]/g,e=>{const t=e?2:e;return(Math.floor(crypto.getRandomValues(new Uint8Array(1))[0]/t)%16).toString(16)}):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx-yxxxxxxxxxxxx-4xxxxxxxxxxxx-xxxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.floor(16*Math.random());return("x"===e?t:Math.floor(t/2)).toString(16)}),exDate:n}}function d(e,t){return!!t.length&&t.some(t=>t===function(e){let t="";const r=e.match(/:\\/\\/(www[0-9]?\\.)?(.[^/:]+)/i);if(null!=r&&r.length>2&&"string"==typeof r[2]&&r[2].length>0){const[,,e]=r;t=e}return t}(e))}const u=(e,t)=>{const{timing:r,navigationEntries:n}=e;let a,o=0,s=0,l=0,d=0,u=0;if(t){a=n[0],o=a.responseStart-a.requestStart,s=a.domContentLoadedEventEnd,l=a.domComplete,u=a.domInteractive}else r.navigationStart&&(a=r,o=a.responseStart-a.navigationStart,s=a.domContentLoadedEventEnd-a.navigationStart,l=a.domComplete-a.navigationStart,d=a.loadEventStart-a.navigationStart,u=a.domInteractive-a.domLoading);const p=a.domainLookupEnd-a.domainLookupStart,f=a.connectEnd-a.connectStart,m=a.responseEnd-a.requestStart;return(e=>{const t=[],{TTFB:r,connectionTime:n,dnsLookUpTime:a,roundTripTime:o,domInteractive:s,networkTime:l,browserRenderTime:d,domLoaded:u,domComplete:p,pageReady:f}=e;return c(t,i(r,"TTFB")),c(t,i(n,"ConnectionTime")),c(t,i(a,"DnsLookUpTime")),c(t,i(o,"RoundTripTime")),c(t,i(s,"CompletePageInteractive")),c(t,i(l,"NetworkTime")),c(t,i(d,"BrowserRenderTime")),c(t,i(u,"DomLoaded")),c(t,i(p,"DomComplete")),c(t,i(f,"PageReady")),{pageMetrics:t,roundTripTime:o}})({TTFB:o,connectionTime:f,dnsLookUpTime:p,roundTripTime:m,domInteractive:u,networkTime:p+f+m,browserRenderTime:a.loadEventStart-a.domContentLoadedEventEnd,domLoaded:s,domComplete:l,pageReady:d})};var p=(e,t)=>{const{performanceData:r={},...n}=e,{networkThreshold:a}=t;let i=!1,{metrics:c=[],resourceList:l=[]}=e,d={};(r.timing||r.navigationEntries)&&(d=r.navigationEntries&&r.navigationEntries.length?u(r,!0):u(r,!1));const{pageMetrics:p=[],roundTripTime:f=0}=d;var m,x;c=[...c,...p],f>(m=a,x=s.NT,"number"==typeof m&&m>=0?m:x)&&(i=!0);const{resourceEntries:h=[],navigationEntries:g=[]}=r,y=[...h,...g].filter(e=>!(e=>e.includes("worker")||e.includes("/api/webTelemetry"))(e.name));return l=((e,t)=>{let r=[];switch(e){case o.RS:r=t.map(e=>({url:e.name,start:e.startTime,initiatorType:e.initiatorType,entryType:e.entryType,duration:e.duration,transferSize:e.transferSize,decodedBodySize:e.decodedBodySize,redirectStart:e.redirectStart,redirectDuration:e.redirectEnd-e.redirectStart,dnsStart:e.domainLookupStart,dnsDuration:e.domainLookupEnd-e.domainLookupStart,tcpStart:e.connectStart,tcpDuration:e.secureConnectionStart>0?e.secureConnectionStart-e.connectStart:e.connectEnd-e.connectStart,sslStart:e.secureConnectionStart>0?e.secureConnectionStart:0,sslDuration:e.secureConnectionStart>0?e.connectEnd-e.secureConnectionStart:0,requestStart:e.requestStart,requestDuration:e.responseStart-e.requestStart,responseStart:e.responseStart,responseDuration:0===e.responseStart?0:e.responseEnd-e.responseStart,fetchStart:e.fetchStart}));break;case o.LT:r=(e=>e.map(e=>({duration:e.duration,startTime:e.startTime})))(t);break;default:r=[]}return r})(o.RS,y),{...n,metrics:c,exceededNetworkThreshold:i,resources:l}},f=r(2);const m="undefined"!=typeof self&&"function"==typeof postMessage;function x(e,t){const r=JSON.stringify(self.batchData||{}).length;(function(){let e=!0;const{waitForPageDetails:t=!1,waitForUserDetails:r=!1,waitforStoreDetails:n=!1}=self.clientConfig,{page:a={},user:o={},store:s=""}=self.commonData;return t&&(e=a.name||a.title),r&&(e=o&&Object.keys(o).length),n&&(e=s),e}()&&r>="10000"||self.isFlushBatchData)&&(self.isFlushBatchData||(self.batchData=JSON.parse(JSON.stringify(a(self.batchData,self.commonData)))),async function(e,t){t&&((e={})=>{const{resources:t=[],consoles:r=[],errors:n=[],customEvents:a=[],metrics:o=[]}=e;return t.length||r.length||n.length||a.length||o.length})(t)&&await self.postMessage({dataType:"sendDataToBeacon",payload:{url:e,data:t}})}(e,self.batchData),self.batchData=null,self.isFlushBatchData=!1),self.batchData=JSON.parse(JSON.stringify(a(self.batchData||{},t))),self.postMessage({dataType:"setBatchData",payload:{url:e,data:self.batchData}})}function h(e){const t={...self.commonData,...e};var r;t.trackedAt=(r=self.performance)&&r.timeOrigin?r.timeOrigin+r.now():Date.now(),t.app&&(t.app.url=self.currentUrl);x(self.commonData.pharosUrl+"/api/webTelemetry",t)}self.exceededNetworkThreshold=!0,self.batchData=null;function g(e){const{data:{dataType:t,payload:r,currentUrl:n}}=e;switch(self.currentUrl=n,self.isFlushBatchData=(()=>{if(self.batchData&&self.batchData.app){return self.batchData.app.url!==self.currentUrl}return!1})(),t){case"setCommonData":self.commonData=a(self.commonData||{},r);break;case"clearBatchData":self.batchData=null;break;case"flushBatchData":self.isFlushBatchData||(self.isFlushBatchData=!0,h(r));break;case"setClientConfig":self.clientConfig=r;break;case"generateVisitorId":{const{uid:e,exDate:t}=l(r[f.anonymousId],90),n=`${e}${Date.now()}`;self.commonData={...r,[f.visitorId]:n,[f.anonymousId]:e},self.postMessage({dataType:"setVisitorId",payload:{[f.visitorId]:n,[f.anonymousId]:e,extraData:{exDate:t}}});break}case"performance":{const e=p(r,self.clientConfig),{exceededNetworkThreshold:t,...n}=e;t?self.sendDataOnUnload=!0:self.exceededNetworkThreshold=!1,h(n);break}case"errorDetails":{const e=function(e,t){const{url:r}=e;let n=!0;const{removeHttpInsecure:a=!1,omittedHostNames:o=[],allowHostNames:s=[]}=t;return r&&(n=!a||function(e){return e.startsWith("https")}(r),n=s.length?!!n&&d(r,s):!!n&&!d(r,o)),n}(r,self.clientConfig),{pharosApi:t,...n}=r;e&&h({pharosApi:t,errors:[n]});break}case"customEvents":h(r);break;case"consoleDetails":{const{pharosApi:e,...t}=r;h({pharosApi:e,consoles:[t]});break}default:console.log("Worker: dataType is not defined")}}var y;y=self,m?y.addEventListener("message",e=>g(e),!1):console.log({msg:"web not available"})}]);',null)}},function(e){e.exports=JSON.parse('["error","unhandledrejection","rejectionhandled"]')},function(e,t,n){"use strict";var r=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(e),n=n.getBlob()}catch(t){n=new Blob([e])}return new Worker(r.createObjectURL(n))}catch(t){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(e){if(!t)throw Error("Inline worker is not supported");return new Worker(t)}}},function(e,t,n){"use strict";n.r(t);var r=n(6),o=n(0);const a={ph_aid:1};var s=e=>{const t=e.cookie.split(";"),n=Object.keys(a).length,r={};let o=0;for(let e=0;e<t.length;e+=1){const s=t[e].split("="),i=s[0].trim(),c=s[1];if(a[i]&&(r[i]=c,o+=1,o===n))break}return r},i=n(4);var c=e=>{const{height:t,width:n}=Object(i.a)();return{[r.anonymousId]:s(window.document)[r.pharosAnonymousCookie],token:e.token,pharosUrl:Object(o.j)(e.endpoint),sdkVersion:"3.2.12-1-CDN",app:{name:e.applicationName,url:window.location.href,releaseTag:e.releaseTag,buildDetails:window[r.buildDetails]},page:{name:Object(o.i)(window.location.href,e.pageName),title:e.pageTitle,height:t,width:n}}},l=n(1);var u=()=>new Promise(e=>{const{readyState:t}=window.document;"complete"===t?e("load"):window.addEventListener("load",()=>{e("load")})});var d=()=>{const e="function"==typeof window.performance.getEntriesByType?window.performance.getEntriesByType("navigation"):[];return{timing:window.performance.timing.toJSON(),navigationEntries:JSON.parse(JSON.stringify(e))}},p=n(7);let f={},h=function(){};const m=new Promise(e=>{h=e});m.then(({url:e,payload:t={}})=>{const n={...t};n.resourceList=JSON.stringify(t.resourceList),Object(o.p)(e,n,window),f={}}),Object(p.a)().then(()=>{const{url:e}=f;e&&h(f)}),Object(p.b)().then(()=>{const{url:e}=f;e&&h(f)});const w=(e,t)=>{f=((e,t)=>{if(!e)return{};const{payload:{metrics:n=[],resourceList:r=[],...a}={},...s}=f;if("queuePayload"===t){const{payload:{metrics:t=[],resourceList:o=[],...a}={},...s}=e,i=r.concat(o);return{payload:{metrics:n.concat(t),resourceList:i,...a},...s}}const i=[...n],{name:c,value:l}=e,u=Object(o.q)(l,c);return Object(o.m)(u)||i.push(u),{payload:{metrics:i,resourceList:r,...a},...s}})(e,t)};var g=n(9);let b=0;const y={};function T(e,t,n,r){this.addEventListener("readystatechange",()=>{if(4===this.readyState){const o=window.performance&&window.performance.now(),a={startTimeStamp:e,endTimeStamp:o};for(let e=0;e<t.length;e+=1)t[e].callback(this,n,t[e].data,r,a)}})}function v(e){const t=window.XMLHttpRequest.prototype.send;window.XMLHttpRequest.prototype.send=function(...n){const r=window.performance&&window.performance.now(),o=b;b+=1;const{beforeRequest:a=[],afterRequest:s=[]}=XMLHttpRequest;for(let e=0;e<a.length;e+=1)a[e].callback(this,o,a[e].data,n);T.call(this,r,s,o,n),e(this),t.apply(this,n)}}function k(e,t,n,r=o.e){XMLHttpRequest.beforeRequest?(XMLHttpRequest.beforeRequest.push({callback:e,data:n}),XMLHttpRequest.afterRequest.push({callback:t,data:n})):(!function(e,t,n){XMLHttpRequest.beforeRequest=[{callback:e,data:n}],XMLHttpRequest.afterRequest=[{callback:t,data:n}]}(e,t,n),function(){const e=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(...t){const n=t[1];this.pharosUrl=n,e.apply(this,t)}}(),v(r))}function S(e,t,n){if(y.beforeRequest)y.beforeRequest.push({callback:e,data:n}),y.afterRequest.push({callback:t,data:n});else{const r=fetch;fetch=function(...e){return function(e,t){const n=window.performance&&window.performance.now();return new Promise((r,a)=>{const s=b;b+=1;const i=e,c=Object(o.l)(i,window),{beforeRequest:l=[],afterRequest:u=[]}=y;for(let t=0;t<l.length;t+=1)l[t].callback(this,s,l[t].data,e);t.apply(this,i).then(t=>{const o=window.performance&&window.performance.now(),a={startTimeStamp:n,endTimeStamp:o,url:c,value:t};for(let t=0;t<u.length;t+=1)u[t].callback(this,s,u[t].data,e,a);r(t)},t=>{const r=window.performance&&window.performance.now(),o={startTimeStamp:n,endTimeStamp:r,url:c,error:t};for(let t=0;t<u.length;t+=1)u[t].callback(this,s,u[t].data,e,o);a(t)})})}(e,r)},y.beforeRequest=[{callback:e,data:n}],y.afterRequest=[{callback:t,data:n}]}}const O=["img","script","iframe","link","audio","video","source"];function x(e,t){if(e){for(const n of e)if(t.includes(n.nodeName.toLowerCase())||x(n.children,t))return!0;return!1}return!1}var E=n(2),j=n(3);class L{constructor(e,t,n){this.performance=e.performance,this.callback=t,this._longTasks=[],this._scheduleTimerTasks=!1,this._networkRequests=[],this._timerId=null,this._timerActivationTime=-1/0,this._incompleteJSInitiatedRequestStartTimes=new Map,this._registerListeners(),this._useMutationObserver=n}computeLastKnownNetwork2Busy(e,t){if(e.length>2)return this.performance.now();const n=[];for(const e of t)n.push({timestamp:e.start,type:"requestStart"}),n.push({timestamp:e.end,type:"requestEnd"});for(const t of e)n.push({timestamp:t,type:"requestStart"});n.sort((e,t)=>e.timestamp-t.timestamp);let r=e.length;for(let e=n.length-1;e>=0;e-=1){const t=n[e];switch(t.type){case"requestStart":r-=1;break;case"requestEnd":if(r+=1,r>2)return t.timestamp;break;default:throw Error("Internal Error: This should never happen")}}return 0}startSchedulingTimerTasks(){this._scheduleTimerTasks=!0,this.rescheduleTimer(this.performance.now()+5e3)}rescheduleTimer(e){this._scheduleTimerTasks&&(this._timerActivationTime>e||(clearTimeout(this._timerId),this._timerId=setTimeout(()=>{const e=this.computeLastKnownNetwork2Busy(this._incompleteRequestStarts,this._networkRequests);this.callback({longTaskEntries:this._longTasks,lastBusy:e})},e-this.performance.now()),this._timerActivationTime=e))}resourceCallback(e){const t=this;if(this&&!this.isDisabled())for(const n of e)t._networkRequestFinishedCallback(n)}disable(){clearTimeout(this._timerId),this._scheduleTimerTasks=!1,this._unregisterListeners()}longTaskCallback(e){const t=this;if(this&&!this.isDisabled())for(const n of e)t._longTaskFinishedCallback(n)}_mutationObserverCallback(){this.rescheduleTimer(this.performance.now()+5e3)}_registerListeners(){k(this._beforeJSInitiatedRequestCallback.bind(this),this._afterJSInitiatedRequestCallback.bind(this)),S(this._beforeJSInitiatedRequestCallback.bind(this),this._afterJSInitiatedRequestCallback.bind(this)),j.a.on(E.RS,this.resourceCallback),j.a.on(E.LT,this.longTaskCallback),this._useMutationObserver&&(this._mutationObserver=function(e){const t=new MutationObserver(t=>{for(const n of t)"childList"===n.type&&x(n.addedNodes,O)&&e(n),"attributes"===n.type&&O.includes(n.target.tagName.toLowerCase())&&e(n)});return t.observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]}),t}(this._mutationObserverCallback.bind(this)))}_unregisterListeners(){delete this._networkRequests,delete this._longTasks}isDisabled(){return!this._scheduleTimerTasks}_beforeJSInitiatedRequestCallback(e,t){this&&!this.isDisabled()&&this._incompleteJSInitiatedRequestStartTimes.set(t,this.performance.now())}_afterJSInitiatedRequestCallback(e,t){this&&!this.isDisabled()&&this._incompleteJSInitiatedRequestStartTimes.delete(t)}_networkRequestFinishedCallback(e){this._networkRequests&&(this._networkRequests.push({start:e.fetchStart,end:e.responseEnd}),this.rescheduleTimer(this.computeLastKnownNetwork2Busy(this._incompleteRequestStarts,this._networkRequests)+5e3))}_longTaskFinishedCallback(e){if(this._longTasks){const t=e.startTime+e.duration;this._longTasks.push({start:e.startTime,end:t}),this.rescheduleTimer(t+5e3)}}get _incompleteRequestStarts(){return[...this._incompleteJSInitiatedRequestStartTimes.values()]}}var D=class{constructor(e,t=0,n=!0){this.startTimestamp=t,this.performance=e.performance,this.calculateQuietWindow=new L(e,this._checkTTI.bind(this),n)}startSchedulingTimerTasks(){this.calculateQuietWindow.startSchedulingTimerTasks()}setData(e,t,n,r){let a=0;const s=this.startTimestamp||e;for(let e=0;e<r.length;e+=1)if(s<r[e].end){const t=r[e].end-r[e].start-50;a+=t>0?t:0}const i=Object(g.a)();if(this.startTimestamp){const e=Object(o.q)(n-this.startTimestamp,"TTI"),t=Object(o.q)(a,"TBT");i.metrics=[],Object(o.o)(i.metrics,e),Object(o.o)(i.metrics,t)}else w({name:"TTI",value:n}),w({name:"TBT",value:a}),w({name:"FirstPaint",value:t}),w({name:"FirstContentfulPaint",value:e});this.disable()}_getMinValue(){return this.performance.timing.domContentLoadedEventEnd?this.performance.timing.domContentLoadedEventEnd-this.performance.timing.navigationStart:null}disable(){this.calculateQuietWindow.disable()}_checkTTI({lastBusy:e,longTaskEntries:t}){const[n,r]="function"==typeof this.performance.getEntriesByType?this.performance.getEntriesByType("paint"):[];let a=0,s=0;if(!this.startTimestamp){const{responseStart:e,navigationStart:t,msFirstPaint:i}=this.performance.timing,c="function"==typeof this.performance.getEntriesByType?this.performance.getEntriesByType("resource"):[];a=n?n.startTime:i||Object(o.a)(e,t,c),s=r?r.startTime:a}const i=this._getMinValue(),c=this.performance.now(),l=this.startTimestamp||a,u=Object(o.c)(l,i,e,c,t);u&&this.setData(s,a,u,t)}};var R=(e,t)=>{if(Object(i.c)(e)){const n=new window.PerformanceObserver(t=>{t.getEntries()&&j.a.emit(e,t.getEntries())});return n.observe({type:e,buffered:t}),n}return null};let _=[],C=null;const I=()=>{l.a.postMessage({dataType:"performance",currentUrl:window.location.href,payload:{performanceData:{resourceEntries:_}}}),C.disable(),_=[]},q=(e=[])=>{const t=JSON.parse(JSON.stringify(e));t&&t.length&&(_=[..._,...t]),C&&!C.isDisabled()||(C=new L(window,I),C.startSchedulingTimerTasks())},M=(e=[])=>{const t=JSON.parse(JSON.stringify(e)),n=[];t.forEach(e=>{n.push(Object(o.q)(e.startTime,r[e.name]))});const a={metrics:n};l.a.postMessage({dataType:"performance",currentUrl:window.location.href,payload:a})};var N=()=>{j.a.on(E.RS,q),j.a.on(E.PT,M),R(E.RS,!0),R(E.LT,!0),R(E.PT,!0)};const P=["largest-contentful-paint","first-input","layout-shift"];var B=async()=>{const e=(()=>{const{PerformanceObserver:e={}}=window,{supportedEntryTypes:t=[]}=e;return!!t&&t.some(e=>P.includes(e.toString()))})();if(N(),e){(await n.e(2).then(n.bind(null,17))).default()}u().then(()=>{const e={performanceData:d()};new D(window).startSchedulingTimerTasks(),l.a.postMessage({dataType:"performance",currentUrl:window.location.href,payload:e})})},U=n(5),A=n(12);var J=e=>{const t={script:"SCRIPT",link:"LINK",image:"IMG"},n=[];return Object.keys(t).forEach(r=>{e.includes(r)||n.push(t[r])}),n};class F{constructor(e,t){this.errorListenerInstance=e,this.clientConfig=t}attachXHRErrorListener(e,t){if(!e.includes("xhr")&&"XMLHttpRequest"in window){const e=e=>{e.status?this.sendErrorAccordingToStatus(e,{traceIdKey:t}):this.errorListenerInstance(e)};k(o.e,e)}}attachGoogleMapErrorListener(e){const{errorListenerInstance:t}=this;if(!e.includes("googlemap")){const e=window.gm_authFailure;window.gm_authFailure=function(...n){t({errorDetailsType:"gmap"}),e&&e.apply(this,n)}}}attachMutationObserverErrorListener(e){const t=J(e),{errorListenerInstance:n}=this;0!==t.length&&function(){function e(e){if(t.indexOf(e.tagName)>=0){const t=e.onerror;e.onerror=function(r){n(r,{}),t&&t.call(e,r)}}}const r=window.MutationObserver||window.WebKitMutationObserver;r&&new r(t=>{[].forEach.call(t,t=>{[].forEach.call(t.addedNodes,e)})}).observe(window.document,{childList:!0,subtree:!0})}()}attachFetchErrorListener(e,t){if(!e.includes("fetch")&&"fetch"in window){const e=(e,n,r,o,a)=>{const{value:s,error:i,url:c}=a,l={type:"fetchError",url:c};s?this.sendErrorAccordingToStatus(s,{...l,traceIdKey:t}):this.errorListenerInstance(i,l)};S(o.e,e)}}addEventErrorListener(e=window,t=A){t.forEach(t=>{e.addEventListener(t,e=>{this.errorListenerInstance(e,{})})})}init(){const{omitErrors:e,omittedUserAgents:t=[]}=this.clientConfig,n=window.navigator&&window.navigator.userAgent||"";if(!Object(o.b)(n,t)){let t=[];const n=this.clientConfig.traceIdKey||"x-b3-traceid";"[object Array]"===Object.prototype.toString.call(e)&&(t=e),this.addEventErrorListener(),this.attachFetchErrorListener(t,n),this.attachXHRErrorListener(t,n),this.attachGoogleMapErrorListener(t),this.attachMutationObserverErrorListener(t)}}sendErrorAccordingToStatus(e,t){const{success:{start:n,end:r}={}}=U;e.status>=n&&e.status<r||this.errorListenerInstance(e,t)}}const H=async(e,t)=>{const r=Object.prototype.toString.call(e);if(["[object Null]","[object Undefined]","[object Function]","[object Array]","[object Boolean]"].includes(r))return;const a={promiseMap:new Map,promiseMapCount:0},s={...(await n.e(3).then(n.bind(null,15))).default(e,{...t,errorListenerVariables:a}),timestamp:Object(o.k)(window.performance)};l.a.postMessage({dataType:"errorDetails",currentUrl:window.location.href,payload:s})};var V=Object(o.d)(e=>{new F(H,e).init()}),W=n(8);var X=e=>{const{type:t,data:n}=e;return{type:t,stackTrace:JSON.stringify([...n]),pharosApi:W.a,timestamp:Object(o.k)(window.performance)}};var K=Object(o.d)(async e=>{const{omitErrors:t=[]}=e;if(!t.includes("console")){const e=Object.keys(console);for(let t=0;t<e.length;t+=1){const n=window.console[e[t]];try{n.apply&&(window.console[e[t]]=function(...r){const o=X({type:e[t],data:r});l.a.postMessage({dataType:"consoleDetails",currentUrl:window.location.href,payload:o}),n.apply(console,r)})}catch(e){console.log("e",e)}}}}),$=n(10);var z=e=>{l.a.postMessage({dataType:"setCommonData",payload:e}),Object(g.b)(e)};const Y=new Set,G=e=>{window.performance.mark(e+"End"),(async e=>{(await n.e(1).then(n.bind(null,16))).default(e),Y.delete(e)})(e)};let Q,Z,ee,te,ne=!1;const re=e=>{const{pageLoad:t}=e;t&&(te&&te.disable(),te=new D(window,Q),te.startSchedulingTimerTasks(),l.a.postMessage({dataType:"performance",currentUrl:window.location.href,payload:{metrics:[Object(o.q)(t,"DomComplete")]}}))},oe=(e,t)=>{if(Q&&Z===t){const t=e-Q;return Q=null,t}return console.error("Call pageView:start event before calling pageview:end and pathname should match"),0},ae=(e,t,n)=>{const r=e;Q=t.now(),Z=r,ne||(ne=!0,((e,t)=>{j.a.on(E.EL,n=>{let r=0;do{const{identifier:o,startTime:a}=n[r];"page-load"===o&&(ee=e(a,t)),r+=1}while(!ee)}),R(E.EL,!0)})(oe,r)),z({app:{url:n.href},page:{name:"",title:""}})};var se=Object(o.d)((e,t)=>{const{performance:n,location:r}=window||{},a=e&&e.toLowerCase(),s=Object(i.d)();switch(a){case"pageview:start":s&&ae(t,n,r);break;case"pageview:end":((e,t)=>{const n=e,r=t.now();ee=oe(r,n),re({pageLoad:ee})})(t,n);break;case"componentload:start":c=t,Y.has(c)||(Y.add(c),window.performance.mark(c+"Start"));break;case"componentload:end":G(t);break;default:((e,t)=>{const n=[];n.push({name:t,data:e,timestamp:Object(o.k)(window.performance)}),l.a.postMessage({dataType:"customEvents",currentUrl:window.location.href,payload:{customEvents:n}})})(t,e)}var c});var ie=async()=>{let e=0,t=[];u().then(()=>{let n=window.scrollY||window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0,r=window.location.pathname;window.addEventListener("scroll",()=>{const o=window.scrollY||window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0,a=window.location.pathname;if(r!==a&&(r=a,t=[]),o>n){const n=o/(Math.max(document.body.scrollHeight||0,document.documentElement.scrollHeight||0,document.body.offsetHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0,document.documentElement.clientHeight||0)-(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0));e=Math.round(100*n),(()=>{e>=25&&e<50?e=25:e>=50&&e<75?e=50:e>=75&&e<100&&(e=75);const n=t.includes(e);e>=25&&!n&&(t.push(e),se("pageScrollPercentage",e))})()}n=o<=0?0:o},!1)}),Object(p.b)().then(()=>{const n=t.includes(e);e>0&&!n&&se("pageScrollPercentage",e)})};var ce=e=>{if(Object($.a)())return void console.log("Pharos-Configure: Pharos is already configured");if(!Object(o.n)(e))return void console.log("Pharos-Configure: Please provide Token/Application Name to configure pharos");Object($.b)();const t=c(e);z(t),l.a.postMessage({dataType:"setClientConfig",currentUrl:window.location.href,payload:e}),l.a.postMessage({dataType:"generateVisitorId",currentUrl:window.location.href,payload:t}),B(e),V(e),K(e),ie(),Object(i.e)()};const le=Object(o.d)(e=>{z({user:e})}),ue=Object(o.d)(e=>z({store:e})),de=Object(o.d)(e=>{z({app:{releaseTag:e}})}),pe=Object(o.d)(({pageName:e,pageTitle:t})=>{if(e){const t=Object(o.i)(window.location.href,e);z({page:{name:t}})}t&&z({page:{title:t}})});const fe={configure:ce,trackError:Object(o.d)((e,t={})=>{const{traceIdKey:n}=t;H(e,{traceIdKey:n,errorInitiator:"client",userDefined:!0})}),setUser:le,setStore:ue,setRelease:de,setPageDetails:pe,trackEvent:se,trackClick:(e,t)=>{const n={eventName:e,data:t.data,url:t};se("click",n)},trackNavigation:(e,t)=>{const n={eventName:e,data:t.data,url:t.url};se("navigation",n)}};try{if(window&&window.Pharos){const e=window.Pharos;Object.keys(e).forEach(t=>{(e[t].q||[]).forEach(e=>{fe[t](...e)})})}}catch(e){console.error("Error in pharos",e.message)}t.default=fe}]).default}));